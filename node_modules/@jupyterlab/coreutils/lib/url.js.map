{"version":3,"file":"url.js","sourceRoot":"","sources":["../../../../coreutils/src/url.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Jupyter Development Team.\n// Distributed under the terms of the Modified BSD License.\n\nimport { JSONObject } from '@phosphor/coreutils';\n\nimport urlparse from 'url-parse';\n\n/**\n * The namespace for URL-related functions.\n */\nexport namespace URLExt {\n  /**\n   * Parse a url into a URL object.\n   *\n   * @param urlString - The URL string to parse.\n   *\n   * @returns A URL object.\n   */\n  export function parse(url: string): IUrl {\n    if (typeof document !== 'undefined') {\n      let a = document.createElement('a');\n      a.href = url;\n      return a;\n    }\n    return urlparse(url);\n  }\n\n  /**\n   * Join a sequence of url components and normalizes as in node `path.join`.\n   *\n   * @param parts - The url components.\n   *\n   * @returns the joined url.\n   */\n  export function join(...parts: string[]): string {\n    // Adapted from url-join.\n    // Copyright (c) 2016 JosÃ© F. Romaniello, MIT License.\n    // https://github.com/jfromaniello/url-join/blob/v1.1.0/lib/url-join.js\n    let str = [].slice.call(parts, 0).join('/');\n\n    // make sure protocol is followed by two slashes\n    str = str.replace(/:\\//g, '://');\n\n    // remove consecutive slashes\n    str = str.replace(/([^:\\s])\\/+/g, '$1/');\n\n    // remove trailing slash before parameters or hash\n    str = str.replace(/\\/(\\?|&|#[^!])/g, '$1');\n\n    // replace ? in parameters with &\n    str = str.replace(/(\\?.+)\\?/g, '$1&');\n\n    return str;\n  }\n\n  /**\n   * Encode the components of a multi-segment url.\n   *\n   * @param url - The url to encode.\n   *\n   * @returns the encoded url.\n   *\n   * #### Notes\n   * Preserves the `'/'` separators.\n   * Should not include the base url, since all parts are escaped.\n   */\n  export function encodeParts(url: string): string {\n    return join(...url.split('/').map(encodeURIComponent));\n  }\n\n  /**\n   * Return a serialized object string suitable for a query.\n   *\n   * @param object - The source object.\n   *\n   * @returns an encoded url query.\n   *\n   * #### Notes\n   * Modified version of [stackoverflow](http://stackoverflow.com/a/30707423).\n   */\n  export function objectToQueryString(value: JSONObject): string {\n    const keys = Object.keys(value);\n\n    if (!keys.length) {\n      return '';\n    }\n\n    return (\n      '?' +\n      keys\n        .map(key => {\n          const content = encodeURIComponent(String(value[key]));\n\n          return key + (content ? '=' + content : '');\n        })\n        .join('&')\n    );\n  }\n\n  /**\n   * Return a parsed object that represents the values in a query string.\n   */\n  export function queryStringToObject(\n    value: string\n  ): { [key: string]: string } {\n    return value\n      .replace(/^\\?/, '')\n      .split('&')\n      .reduce(\n        (acc, val) => {\n          const [key, value] = val.split('=');\n\n          acc[key] = decodeURIComponent(value || '');\n\n          return acc;\n        },\n        {} as { [key: string]: string }\n      );\n  }\n\n  /**\n   * Test whether the url is a local url.\n   *\n   * #### Notes\n   * This function returns `false` for any fully qualified url, including\n   * `data:`, `file:`, and `//` protocol URLs.\n   */\n  export function isLocal(url: string): boolean {\n    const { protocol } = parse(url);\n\n    return url.toLowerCase().indexOf(protocol) !== 0 && url.indexOf('//') !== 0;\n  }\n\n  /**\n   * The interface for a URL object\n   */\n  export interface IUrl {\n    /**\n     * The full URL string that was parsed with both the protocol and host\n     * components converted to lower-case.\n     */\n    href?: string;\n\n    /**\n     * Identifies the URL's lower-cased protocol scheme.\n     */\n    protocol?: string;\n\n    /**\n     * The full lower-cased host portion of the URL, including the port if\n     * specified.\n     */\n    host?: string;\n\n    /**\n     * The lower-cased host name portion of the host component without the\n     * port included.\n     */\n    hostname?: string;\n\n    /**\n     * The numeric port portion of the host component.\n     */\n    port?: string;\n\n    /**\n     * The entire path section of the URL.\n     */\n    pathname?: string;\n\n    /**\n     * The \"fragment\" portion of the URL including the leading ASCII hash\n     * `(#)` character\n     */\n    hash?: string;\n\n    /**\n     * The search element, including leading question mark (`'?'`), if any,\n     * of the URL.\n     */\n    search?: string;\n  }\n}\n"]}